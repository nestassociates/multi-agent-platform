---
import BaseLayout from '../layouts/BaseLayout.astro';

// Will be loaded from generated data file
const reviews: any[] = [];
---

<BaseLayout title="Customer Reviews & Testimonials">
  <div class="min-h-screen bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white border-b">
      <div class="container mx-auto px-4 py-4">
        <div class="flex gap-6">
          <a href="/" class="text-gray-600 hover:text-blue-600 transition">Home</a>
          <a href="/about" class="text-gray-600 hover:text-blue-600 transition">About</a>
          <a href="/services" class="text-gray-600 hover:text-blue-600 transition">Services</a>
          <a href="/properties" class="text-gray-600 hover:text-blue-600 transition">Properties</a>
          <a href="/reviews" class="text-blue-600 font-semibold">Reviews</a>
          <a href="/blog" class="text-gray-600 hover:text-blue-600 transition">Blog</a>
          <a href="/contact" class="text-gray-600 hover:text-blue-600 transition">Contact</a>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <section class="bg-white border-b py-12">
      <div class="container mx-auto px-4 text-center">
        <h1 class="text-4xl font-bold mb-4">Customer Reviews</h1>
        <p class="text-gray-600 text-lg">
          See what my clients say about their experience
        </p>
      </div>
    </section>

    <!-- Reviews Section -->
    <section class="py-16">
      <div class="container mx-auto px-4">
        {reviews.length === 0 ? (
          <div class="bg-white rounded-lg shadow-sm p-12 text-center max-w-2xl mx-auto">
            <svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
            </svg>
            <h2 class="text-2xl font-semibold mb-2">No Reviews Yet</h2>
            <p class="text-gray-600 mb-6">Be the first to share your experience working with me</p>
            <a href="/contact" class="inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition">
              Get in Touch
            </a>
          </div>
        ) : (
          <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            {reviews.map((review) => (
              <div class="bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition">
                <!-- Star Rating -->
                <div class="flex mb-4">
                  {[...Array(5)].map((_, i) => (
                    <svg
                      class={`w-5 h-5 ${i < review.rating ? 'text-yellow-400' : 'text-gray-300'}`}
                      fill="currentColor"
                      viewBox="0 0 20 20"
                    >
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                  ))}
                </div>

                <!-- Review Text -->
                <p class="text-gray-700 mb-4 italic">"{review.text}"</p>

                <!-- Reviewer Info -->
                <div class="pt-4 border-t">
                  <p class="font-semibold text-gray-900">{review.customerName}</p>
                  {review.propertyType && (
                    <p class="text-sm text-gray-600">{review.propertyType}</p>
                  )}
                  {review.date && (
                    <p class="text-xs text-gray-500 mt-1">
                      {new Date(review.date).toLocaleDateString('en-GB', {
                        month: 'long',
                        year: 'numeric'
                      })}
                    </p>
                  )}
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </section>

    <!-- Overall Stats (when reviews exist) -->
    {reviews.length > 0 && (
      <section class="bg-white py-16">
        <div class="container mx-auto px-4">
          <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold mb-8 text-center">Overall Rating</h2>
            <div class="grid md:grid-cols-3 gap-8 text-center">
              <div>
                <div class="text-5xl font-bold text-blue-600 mb-2">
                  {(reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length).toFixed(1)}
                </div>
                <div class="flex justify-center mb-2">
                  {[...Array(5)].map((_, i) => (
                    <svg class="w-6 h-6 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                  ))}
                </div>
                <p class="text-gray-600">Average Rating</p>
              </div>
              <div>
                <div class="text-5xl font-bold text-blue-600 mb-2">{reviews.length}</div>
                <p class="text-gray-600">Total Reviews</p>
              </div>
              <div>
                <div class="text-5xl font-bold text-blue-600 mb-2">
                  {Math.round((reviews.filter(r => r.rating === 5).length / reviews.length) * 100)}%
                </div>
                <p class="text-gray-600">5-Star Reviews</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    )}

    <!-- CTA Section -->
    <section class="bg-blue-50 py-16">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-bold mb-4">Ready to Work Together?</h2>
        <p class="text-gray-700 mb-8 text-lg">
          Join my satisfied clients and experience professional real estate service
        </p>
        <div class="flex justify-center gap-4">
          <a href="/properties" class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition">
            View Properties
          </a>
          <a href="/contact" class="border-2 border-blue-600 text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-blue-600 hover:text-white transition">
            Contact Me
          </a>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>
